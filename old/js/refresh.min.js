var refresh_urls=[],url_number=0,refreshing=!1;Array.prototype.remove=function(a){a=this.indexOf(a);-1!=a&&this.splice(a,1)};function add_refresh_url(a){refreshing||(a="https://purge.jsdelivr.net/gh/aruCraftR/arucraftr.github.io/"+a,0<=refresh_urls.indexOf(a)||(refresh_urls.push(a),$("a[onclick='add_refresh_urls("+a+")']").css("pointer-events","none"),$("p").append("<br/>"+a)))}
function user_add_refresh_url(){if(!refreshing){var a=prompt("\u8bf7\u8f93\u5165\u76ee\u6807\u7f13\u5b58\u76ee\u5f55\uff1a");""==a|void 0==a||(a="https://purge.jsdelivr.net/gh/aruCraftR/arucraftr.github.io/"+a,0<=refresh_urls.indexOf(a)?alert("\u8ba1\u5212\u5df2\u5b58\u5728"):(refresh_urls.push(a),$("a[onclick='add_refresh_urls("+a+")']").css("pointer-events","none"),$("p").append("<br/>"+a)))}}
function start_refresh_url(){refreshing||($("h1").text("\u6b63\u5728\u5237\u65b0"),refreshing=!0,refresh_url())}function reprint_urls(){i=0;for(len=refresh_urls.length;i<len;i++)$("p").append("<br/>"+refresh_urls[i])}
function refresh_url(){if(url_number==refresh_urls.length)$("h1").text("\u5237\u65b0\u5b8c\u6210"),refreshing=!1,url_number=0,$("p").text("\u8ba1\u5212\u5217\u8868\uff1a"),0<refresh_urls.length&&reprint_urls();else{var a,c;refreshing_url=refresh_urls[url_number];var b=new XMLHttpRequest;b.onerror=function(){$("span").append("<br/>"+refreshing_url+"\u5237\u65b0\u5931\u8d25")};b.onload=function(){try{a=JSON.parse(b.responseText)}catch(d){$("span").append("<br/>"+refreshing_url+"\u5237\u65b0\u5931\u8d25\uff1a"+
d);url_number++;refresh_url();return}if(a.success)for(var e in a.cdn)e||(c=!0);else c=!0;c?($("span").append("<br/>"+refreshing_url+"\u5237\u65b0\u5931\u8d25\uff1a\u8be6\u60c5\u8bf7\u67e5\u770b\u63a7\u5236\u53f0"),console.log(a),url_number++):($("span").append("<br/>"+refreshing_url+"\u5237\u65b0\u5b8c\u6210"),refresh_urls.remove(refreshing_url));refresh_url()};b.open("GET",refreshing_url,!0);b.send()}}window.onload=function(){$("body").css("visibility","unset")};
